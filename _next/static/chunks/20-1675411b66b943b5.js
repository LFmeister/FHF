"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{6806:function(e,r,t){t.d(r,{z:function(){return n}});var a=t(7437),i=t(2265);let cn=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(Boolean).join(" ")},n=(0,i.forwardRef)((e,r)=>{let{className:t,variant:i="primary",size:n="md",loading:o=!1,disabled:s,children:c,...l}=e;return(0,a.jsxs)("button",{className:cn("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm hover:shadow-md",{primary:"bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800",secondary:"bg-accent-100 text-primary-800 hover:bg-accent-200 active:bg-accent-300",outline:"border-2 border-primary-300 bg-white text-primary-700 hover:bg-primary-50 hover:border-primary-400 active:bg-primary-100",ghost:"text-primary-700 hover:bg-primary-50 active:bg-primary-100",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"}[i],{sm:"h-9 px-4 text-sm",md:"h-11 px-6 py-2.5 text-base",lg:"h-12 px-8 text-lg"}[n],t),ref:r,disabled:s||o,...l,children:[o&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});n.displayName="Button"},1018:function(e,r,t){t.d(r,{Ol:function(){return s},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},ll:function(){return c}});var a=t(7437),i=t(2265),n=t(7042);let o=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.W)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});o.displayName="Card";let s=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.W)("flex flex-col space-y-1.5 p-6",t),...i})});s.displayName="CardHeader";let c=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.W)("text-2xl font-semibold leading-none tracking-tight",t),...i})});c.displayName="CardTitle";let l=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.W)("text-sm text-muted-foreground",t),...i})});l.displayName="CardDescription";let d=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.W)("p-6 pt-0",t),...i})});d.displayName="CardContent";let u=(0,i.forwardRef)((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.W)("flex items-center p-6 pt-0",t),...i})});u.displayName="CardFooter"},9310:function(e,r,t){t.d(r,{I:function(){return o}});var a=t(7437),i=t(2265),n=t(7042);let o=(0,i.forwardRef)((e,r)=>{let{className:t,type:i,error:o,...s}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("input",{type:i,className:(0,n.W)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o&&"border-destructive focus-visible:ring-destructive",t),ref:r,...s}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive",children:o})]})});o.displayName="Input"},471:function(e,r,t){t.d(r,{I:function(){return n}});var a=t(7823),i=t(2601);let n={getBaseUrl(){let e=(i.env.NEXT_PUBLIC_SITE_URL||"").replace(/\/$/,"");if(e)return e;{let e=window.location.origin.replace(/\/$/,"");return"".concat(e,"/FHF")}},async signUp(e,r,t){let i="".concat(this.getBaseUrl(),"/auth/callback?email=").concat(encodeURIComponent(e)),{data:n,error:o}=await a.O.auth.signUp({email:e,password:r,options:{data:{full_name:t},emailRedirectTo:i}});return{data:n,error:o}},async signIn(e,r){let{data:t,error:i}=await a.O.auth.signInWithPassword({email:e,password:r});return{data:t,error:i}},async signOut(){let{error:e}=await a.O.auth.signOut();return{error:e}},async resetPassword(e){let{data:r,error:t}=await a.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(this.getBaseUrl(),"/auth/reset-password")});return{data:r,error:t}},async updatePassword(e){let{data:r,error:t}=await a.O.auth.updateUser({password:e});return{data:r,error:t}},async updateFullName(e){let{data:r,error:t}=await a.O.auth.updateUser({data:{full_name:e}});return{data:r,error:t}},async updateEmail(e){let{data:r,error:t}=await a.O.auth.updateUser({email:e});return{data:r,error:t}},async getCurrentUser(){let{data:{user:e},error:r}=await a.O.auth.getUser();return{user:e,error:r}},async isEmailConfirmed(){let{data:{user:e}}=await a.O.auth.getUser();return(null==e?void 0:e.email_confirmed_at)!==null},async resendConfirmation(e){let r="".concat(this.getBaseUrl(),"/auth/callback?email=").concat(encodeURIComponent(e)),{data:t,error:i}=await a.O.auth.resend({type:"signup",email:e,options:{emailRedirectTo:r}});return{data:t,error:i}},async getSession(){let{data:{session:e},error:r}=await a.O.auth.getSession();return{session:e,error:r}},async setSessionFromHash(){let e=window.location.hash;if(!e||e.length<2)return{set:!1,error:null};let r=new URLSearchParams(e.substring(1)),t=r.get("error"),i=r.get("error_description");if(t)return{set:!1,error:{message:"".concat(t,": ").concat(i||"")}};let n=r.get("access_token"),o=r.get("refresh_token");if(!n||!o)return{set:!1,error:null};let{data:s,error:c}=await a.O.auth.setSession({access_token:n,refresh_token:o});if(!c){try{let e=window.location.pathname+window.location.search;window.history.replaceState({},document.title,e)}catch(e){}return{set:!0,session:null==s?void 0:s.session,error:null}}return{set:!1,error:c}},async exchangeCodeForSession(e){let{data:r,error:t}=await a.O.auth.exchangeCodeForSession(e);return{data:r,error:t}},onAuthStateChange:e=>a.O.auth.onAuthStateChange(e)}},47:function(e,r,t){t.d(r,{C:function(){return i}});var a=t(7823);function generateInviteCode(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r="";for(let t=0;t<8;t++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}let i={async createProject(e){let r;let{data:{user:t}}=await a.O.auth.getUser();if(!t)throw Error("Usuario no autenticado");let i=0;do{r=generateInviteCode(),i++;let{data:e,error:t}=await a.O.from("projects").select("id").eq("invite_code",r).maybeSingle();if(!e)break;if(i>=5)throw Error("No se pudo generar un c\xf3digo de invitaci\xf3n \xfanico")}while(i<5);let{data:n,error:o}=await a.O.from("projects").insert({name:e.name,description:e.description,currency:e.currency||"COP",invite_code:r,owner_id:t.id}).select().single();if(o)throw o;let{error:s}=await a.O.from("project_members").insert({project_id:n.id,user_id:t.id,role:"owner"});if(s)throw s;return n},async getUserProjects(){let{data:{user:e}}=await a.O.auth.getUser();if(!e)throw Error("Usuario no autenticado");let{data:r,error:t}=await a.O.from("project_members").select("\n        project_id,\n        role,\n        joined_at,\n        projects (\n          id,\n          name,\n          description,\n          invite_code,\n          owner_id,\n          currency,\n          created_at,\n          updated_at\n        )\n      ").eq("user_id",e.id);if(t)throw t;return r.map(e=>({...e.projects,user_role:e.role,joined_at:e.joined_at}))},async getProject(e){let{data:r,error:t}=await a.O.from("projects").select("*").eq("id",e).single();if(t)throw t;return r},async getProjectMembers(e){let{data:r,error:t}=await a.O.from("project_members").select("\n        *,\n        user:users!user_id (\n          full_name,\n          email\n        )\n      ").eq("project_id",e);if(t)throw t;return r},async joinProject(e){let{data:{user:r}}=await a.O.auth.getUser();if(!r)throw Error("Usuario no autenticado");let{data:t,error:i}=await a.O.from("projects").select("id").eq("invite_code",e).single();if(i)throw Error("C\xf3digo de invitaci\xf3n inv\xe1lido");let{data:n}=await a.O.from("project_members").select("id").eq("project_id",t.id).eq("user_id",r.id).single();if(n)throw Error("Ya eres miembro de este proyecto");let{error:o}=await a.O.from("project_members").insert({project_id:t.id,user_id:r.id,role:"view"});if(o)throw o;return t},async updateProject(e,r){let{data:t,error:i}=await a.O.from("projects").update(r).eq("id",e).select().single();if(i)throw i;return t},async deleteProject(e){let{error:r}=await a.O.from("projects").delete().eq("id",e);if(r)throw r},async removeMember(e,r){let{error:t}=await a.O.from("project_members").delete().eq("project_id",e).eq("user_id",r);if(t)throw t},async regenerateInviteCode(e){let r=generateInviteCode(),{data:t,error:i}=await a.O.from("projects").update({invite_code:r}).eq("id",e).select().single();if(i)throw i;return t},async updateMemberRole(e,r,t){let{error:i}=await a.O.from("project_members").update({role:t}).eq("project_id",e).eq("user_id",r);if(i)throw i},async getUserRole(e,r){let{data:t,error:i}=await a.O.from("project_members").select("role").eq("project_id",e).eq("user_id",r).single();if(i)throw i;return t.role},async hasPermission(e,r,t){let a=await this.getUserRole(e,r);switch(t){case"read":return["owner","admin","normal","view"].includes(a);case"write":return["owner","admin","normal"].includes(a);case"delete":return["owner","admin"].includes(a);case"admin":return["owner"].includes(a);default:return!1}}}},7823:function(e,r,t){t.d(r,{O:function(){return i}});var a=t(7440);let i=(0,a.eI)("https://skejleilyksauxtrhxac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNrZWpsZWlseWtzYXV4dHJoeGFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNDE5NjIsImV4cCI6MjA3MjgxNzk2Mn0.YCF5aeZDZPQpt-2oqjl2qKEG8YoD3CDMvRJjlCmADEA")},5270:function(e,r,t){t.d(r,{S4:function(){return o},UA:function(){return s},dm:function(){return i},fM:function(){return c},gY:function(){return n},mw:function(){return d},zV:function(){return l}});var a=t(2160);let i=a.Ry({email:a.Z_().email("Email inv\xe1lido"),password:a.Z_().min(6,"La contrase\xf1a debe tener al menos 6 caracteres")}),n=a.Ry({email:a.Z_().email("Email inv\xe1lido"),password:a.Z_().min(6,"La contrase\xf1a debe tener al menos 6 caracteres"),confirmPassword:a.Z_(),fullName:a.Z_().min(2,"El nombre debe tener al menos 2 caracteres").max(50,"El nombre es muy largo").regex(/^[a-zA-ZÀ-ÿ\u00f1\u00d1\s]+$/,"El nombre solo puede contener letras y espacios")}).refine(e=>e.password===e.confirmPassword,{message:"Las contrase\xf1as no coinciden",path:["confirmPassword"]}),o=a.Ry({email:a.Z_().email("Email inv\xe1lido")});a.Ry({password:a.Z_().min(6,"La contrase\xf1a debe tener al menos 6 caracteres"),confirmPassword:a.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Las contrase\xf1as no coinciden",path:["confirmPassword"]});let s=a.Ry({name:a.Z_().min(1,"El nombre es requerido").max(100,"El nombre es muy largo"),description:a.Z_().optional(),currency:a.Km(["COP","AUD"]).default("COP")});a.Ry({name:a.Z_().min(2,"El nombre del proyecto debe tener al menos 2 caracteres"),description:a.Z_().optional()}),a.Ry({amount:a.oQ.number().positive("El monto debe ser positivo"),description:a.Z_().optional(),date:a.Z_().min(1,"La fecha es requerida"),performed_by:a.Z_().min(1,"El usuario que realiz\xf3 la transacci\xf3n es requerido")});let c=a.Ry({description:a.Z_().optional(),amount:a.oQ.number().positive("El monto debe ser positivo"),category:a.Z_().min(1,"La categor\xeda es requerida"),income_date:a.Z_().min(1,"La fecha es requerida"),performed_by:a.Z_().min(1,"El usuario que realiz\xf3 la transacci\xf3n es requerido")}).refine(e=>"Otros"!==e.category||e.description&&e.description.trim().length>0,{message:'La descripci\xf3n es requerida cuando la categor\xeda es "Otros"',path:["description"]}),l=a.Ry({amount:a.oQ.number().positive("El monto debe ser positivo"),description:a.Z_().optional(),category:a.Z_().min(1,"La categor\xeda es requerida"),expense_date:a.Z_().min(1,"La fecha es requerida"),performed_by:a.Z_().min(1,"El usuario que realiz\xf3 la transacci\xf3n es requerido")}).refine(e=>(e.category,e.description&&e.description.trim().length>0),{message:"La descripci\xf3n es requerida",path:["description"]}),d=a.Ry({inviteCode:a.Z_().length(8,"El c\xf3digo de invitaci\xf3n debe tener 8 caracteres")})}}]);