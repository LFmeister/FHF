(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);let s=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7216:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);let s=(0,a.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);let s=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5589:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);let s=(0,a.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2104:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);let s=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8159:function(e,t,r){Promise.resolve().then(r.bind(r,2804))},2804:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ResetPasswordPage}});var a=r(7437),s=r(2265),n=r(1865),i=r(8110),l=r(4033),c=r(2104),o=r(3008),d=r(5589),u=r(7216),m=r(9670),x=r(6806),f=r(9310),h=r(1018),p=r(471),g=r(2160);let y=g.Ry({password:g.Z_().min(6,"La contrase\xf1a debe tener al menos 6 caracteres"),confirmPassword:g.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Las contrase\xf1as no coinciden",path:["confirmPassword"]});function ResetPasswordPage(){var e,t;let[r,g]=(0,s.useState)(!1),[b,w]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[N,C]=(0,s.useState)(null),[k,Z]=(0,s.useState)(!1),[I,S]=(0,s.useState)(null),O=(0,l.useRouter)();(0,l.useSearchParams)();let{register:P,handleSubmit:R,formState:{errors:z}}=(0,n.cI)({resolver:(0,i.F)(y)});(0,s.useEffect)(()=>{let checkSession=async()=>{try{let{session:e}=await p.I.getSession();S(!!e)}catch(e){S(!1)}};checkSession()},[]);let onSubmit=async e=>{j(!0),C(null);try{let{error:t}=await p.I.updatePassword(e.password);if(t){C(t.message);return}Z(!0),setTimeout(()=>{O.push("/dashboard")},3e3)}catch(e){C("Error inesperado. Por favor, intenta de nuevo.")}finally{j(!1)}};return null===I?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center p-4",children:(0,a.jsx)(h.Zb,{className:"w-full max-w-md",children:(0,a.jsx)(h.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Verificando sesi\xf3n..."})]})})})}):!1===I?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center p-4",children:(0,a.jsxs)(h.Zb,{className:"w-full max-w-md",children:[(0,a.jsxs)(h.Ol,{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),(0,a.jsx)(h.ll,{className:"text-xl",children:"Enlace Inv\xe1lido"}),(0,a.jsx)(h.SZ,{children:"El enlace de recuperaci\xf3n de contrase\xf1a ha expirado o no es v\xe1lido."})]}),(0,a.jsx)(h.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-red-700 bg-red-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"\xbfQu\xe9 puedes hacer?"}),(0,a.jsxs)("ul",{className:"text-left space-y-1",children:[(0,a.jsx)("li",{children:"• Solicita un nuevo enlace de recuperaci\xf3n"}),(0,a.jsx)("li",{children:"• Verifica que el enlace est\xe9 completo"}),(0,a.jsx)("li",{children:"• Contacta al soporte si el problema persiste"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsx)(x.z,{variant:"outline",onClick:()=>O.push("/auth/login"),className:"flex-1",children:"Ir al Login"}),(0,a.jsx)(x.z,{onClick:()=>O.push("/auth/forgot-password"),className:"flex-1",children:"Recuperar Contrase\xf1a"})]})]})})]})}):k?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center p-4",children:(0,a.jsxs)(h.Zb,{className:"w-full max-w-md",children:[(0,a.jsxs)(h.Ol,{className:"text-center",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),(0,a.jsx)(h.ll,{className:"text-xl",children:"\xa1Contrase\xf1a Actualizada!"}),(0,a.jsx)(h.SZ,{children:"Tu contrase\xf1a ha sido cambiada exitosamente."})]}),(0,a.jsx)(h.aY,{children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-green-700 bg-green-50 p-3 rounded-lg",children:(0,a.jsx)("p",{children:"Ser\xe1s redirigido al dashboard autom\xe1ticamente..."})}),(0,a.jsx)(x.z,{onClick:()=>O.push("/dashboard"),className:"w-full",children:"Ir al Dashboard"})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center p-4",children:(0,a.jsxs)(h.Zb,{className:"w-full max-w-md",children:[(0,a.jsxs)(h.Ol,{className:"space-y-1",children:[(0,a.jsx)(h.ll,{className:"text-2xl text-center",children:"Nueva Contrase\xf1a"}),(0,a.jsx)(h.SZ,{className:"text-center",children:"Ingresa tu nueva contrase\xf1a para completar la recuperaci\xf3n"})]}),(0,a.jsx)(h.aY,{children:(0,a.jsxs)("form",{onSubmit:R(onSubmit),className:"space-y-4",children:[N&&(0,a.jsx)("div",{className:"p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-md",children:N}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-sm font-medium",children:"Nueva Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.I,{id:"password",type:r?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",error:null===(e=z.password)||void 0===e?void 0:e.message,...P("password")}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!r),className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground hover:text-foreground",children:r?(0,a.jsx)(u.Z,{}):(0,a.jsx)(m.Z,{})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirmar Nueva Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.I,{id:"confirmPassword",type:b?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",error:null===(t=z.confirmPassword)||void 0===t?void 0:t.message,...P("confirmPassword")}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground hover:text-foreground",children:b?(0,a.jsx)(u.Z,{}):(0,a.jsx)(m.Z,{})})]})]}),(0,a.jsx)(x.z,{type:"submit",className:"w-full",loading:v,children:"Actualizar Contrase\xf1a"}),(0,a.jsx)("div",{className:"text-center text-sm",children:(0,a.jsx)("button",{type:"button",onClick:()=>O.push("/auth/login"),className:"text-primary hover:underline",children:"Volver al login"})})]})})]})})}},6806:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var a=r(7437),s=r(2265);let cn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},n=(0,s.forwardRef)((e,t)=>{let{className:r,variant:s="primary",size:n="md",loading:i=!1,disabled:l,children:c,...o}=e;return(0,a.jsxs)("button",{className:cn("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm hover:shadow-md",{primary:"bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800",secondary:"bg-accent-100 text-primary-800 hover:bg-accent-200 active:bg-accent-300",outline:"border-2 border-primary-300 bg-white text-primary-700 hover:bg-primary-50 hover:border-primary-400 active:bg-primary-100",ghost:"text-primary-700 hover:bg-primary-50 active:bg-primary-100",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"}[s],{sm:"h-9 px-4 text-sm",md:"h-11 px-6 py-2.5 text-base",lg:"h-12 px-8 text-lg"}[n],r),ref:t,disabled:l||i,...o,children:[i&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});n.displayName="Button"},1018:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=r(7437),s=r(2265),n=r(7042);let i=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.W)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.W)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.W)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.W)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let d=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.W)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.W)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},9310:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(7042);let i=(0,s.forwardRef)((e,t)=>{let{className:r,type:s,error:i,...l}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("input",{type:s,className:(0,n.W)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i&&"border-destructive focus-visible:ring-destructive",r),ref:t,...l}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive",children:i})]})});i.displayName="Input"},471:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(7823),s=r(2601);let n={getBaseUrl(){let e=(s.env.NEXT_PUBLIC_SITE_URL||"").replace(/\/$/,"");if(e)return e;{let e=window.location.origin.replace(/\/$/,"");return"".concat(e,"/FHF")}},async signUp(e,t,r){let s="".concat(this.getBaseUrl(),"/auth/callback?email=").concat(encodeURIComponent(e)),{data:n,error:i}=await a.O.auth.signUp({email:e,password:t,options:{data:{full_name:r},emailRedirectTo:s}});return{data:n,error:i}},async signIn(e,t){let{data:r,error:s}=await a.O.auth.signInWithPassword({email:e,password:t});return{data:r,error:s}},async signOut(){let{error:e}=await a.O.auth.signOut();return{error:e}},async resetPassword(e){let{data:t,error:r}=await a.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(this.getBaseUrl(),"/auth/reset-password")});return{data:t,error:r}},async updatePassword(e){let{data:t,error:r}=await a.O.auth.updateUser({password:e});return{data:t,error:r}},async updateFullName(e){let{data:t,error:r}=await a.O.auth.updateUser({data:{full_name:e}});return{data:t,error:r}},async updateEmail(e){let{data:t,error:r}=await a.O.auth.updateUser({email:e});return{data:t,error:r}},async getCurrentUser(){let{data:{user:e},error:t}=await a.O.auth.getUser();return{user:e,error:t}},async isEmailConfirmed(){let{data:{user:e}}=await a.O.auth.getUser();return(null==e?void 0:e.email_confirmed_at)!==null},async resendConfirmation(e){let t="".concat(this.getBaseUrl(),"/auth/callback?email=").concat(encodeURIComponent(e)),{data:r,error:s}=await a.O.auth.resend({type:"signup",email:e,options:{emailRedirectTo:t}});return{data:r,error:s}},async getSession(){let{data:{session:e},error:t}=await a.O.auth.getSession();return{session:e,error:t}},async setSessionFromHash(){let e=window.location.hash;if(!e||e.length<2)return{set:!1,error:null};let t=new URLSearchParams(e.substring(1)),r=t.get("error"),s=t.get("error_description");if(r)return{set:!1,error:{message:"".concat(r,": ").concat(s||"")}};let n=t.get("access_token"),i=t.get("refresh_token");if(!n||!i)return{set:!1,error:null};let{data:l,error:c}=await a.O.auth.setSession({access_token:n,refresh_token:i});if(!c){try{let e=window.location.pathname+window.location.search;window.history.replaceState({},document.title,e)}catch(e){}return{set:!0,session:null==l?void 0:l.session,error:null}}return{set:!1,error:c}},async exchangeCodeForSession(e){let{data:t,error:r}=await a.O.auth.exchangeCodeForSession(e);return{data:t,error:r}},onAuthStateChange:e=>a.O.auth.onAuthStateChange(e)}},7823:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var a=r(7440);let s=(0,a.eI)("https://skejleilyksauxtrhxac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNrZWpsZWlseWtzYXV4dHJoeGFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNDE5NjIsImV4cCI6MjA3MjgxNzk2Mn0.YCF5aeZDZPQpt-2oqjl2qKEG8YoD3CDMvRJjlCmADEA")},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[218,727,971,472,744],function(){return e(e.s=8159)}),_N_E=e.O()}]);